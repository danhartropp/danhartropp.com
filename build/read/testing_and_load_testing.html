<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Dan Hartropp</title>

    <link rel="apple-touch-icon" sizes="180x180" href="/static/ico/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/static/ico/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/static/ico/favicon-16x16.png">
    <link rel="manifest" href="/static/ico/site.webmanifest">
    <meta  name="msapplication-config" content="/static/ico/browserconfig.xml">
    <link rel="mask-icon" href="/static/ico/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@1.0.0/css/bulma.min.css">
    
  
    <style>

      /* set width on the outer elements to center the middle bit */
      @media screen and (min-width: 1024px) {
      .navbar-brand, .navbar-end {
          width: 15vw;
        }
      }

      @media screen and (max-width: 1023px){
        .container.is-fluid {
        padding-left: 0px;
        padding-right: 0px;
      }
      }

      .hero {
          background-size: cover;
          background-position: center;
      }

      a.navbar-item::after {
          content: attr(title);
          font-weight: 600;
          height: 0;
          overflow: hidden;
          visibility: hidden;
      }

      a.navbar-item {
        flex-direction: column;
        justify-content: center;
      }

      a.navbar-item:hover {
          background-color: #fafafa;
          font-weight: 600;
          color: #4a4a4a;
      }

      .skip-link {
        position: absolute;
        top: -40px;
        left: 0;
        background: #000000;
        color: white;
        padding: 8px;
        z-index: 100;
      }

      .skip-link:focus {
        top: 0;
      }

      .divlink {
        position: absolute;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
        text-decoration: none; /* No underlines on the link */
        z-index: 10; /* Places the link above everything else in the div */
        background-color: #FFF; /* Fix to make div clickable in IE */
        opacity: 0; /* Fix to make div clickable in IE */
        filter: alpha(opacity=1); /* Fix to make div clickable in IE */
      }

    </style>


  </head>

  <body class="has-navbar-fixed-top">
    <a class="skip-link" href="#maincontent">Skip to main content</a>
      <nav class="navbar is-fixed-top pb-6" role="navigation" aria-label="main navigation">
          <div class="navbar-brand has-text-primary">
            <a class="navbar-item is-size-3 has-text-weight-bold" href="/">DAN HARTROPP</a>
            <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false" data-target="navbar">
              <span aria-hidden="true"></span>
              <span aria-hidden="true"></span>
              <span aria-hidden="true"></span>
            </a>
          </div>
        
          <div id="navbar" class="navbar-menu">
            <div class="navbar-start is-flex-grow-2 is-justify-content-center">
              <a class="navbar-item is-size-4 has-text-primary" title="Read" href="/read/index.html">read</a>
              <a class="navbar-item is-size-4 has-text-primary" title="Look" href="/look/index.html">look</a>
              <a class="navbar-item is-size-4 has-text-primary" title="Get in touch" href="/contact.html">get in touch</a>
            </div>
        
            <div class="navbar-end">
              <div class="navbar-item">
                <a class="px-1" style="color:var(--bulma-navbar-h)" href="https://www.instagram.com/danhartropp/">
                  <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" fill="currentColor" class="bi bi-instagram" viewBox="0 0 16 16">
                    <path d="M8 0C5.829 0 5.556.01 4.703.048 3.85.088 3.269.222 2.76.42a3.9 3.9 0 0 0-1.417.923A3.9 3.9 0 0 0 .42 2.76C.222 3.268.087 3.85.048 4.7.01 5.555 0 5.827 0 8.001c0 2.172.01 2.444.048 3.297.04.852.174 1.433.372 1.942.205.526.478.972.923 1.417.444.445.89.719 1.416.923.51.198 1.09.333 1.942.372C5.555 15.99 5.827 16 8 16s2.444-.01 3.298-.048c.851-.04 1.434-.174 1.943-.372a3.9 3.9 0 0 0 1.416-.923c.445-.445.718-.891.923-1.417.197-.509.332-1.09.372-1.942C15.99 10.445 16 10.173 16 8s-.01-2.445-.048-3.299c-.04-.851-.175-1.433-.372-1.941a3.9 3.9 0 0 0-.923-1.417A3.9 3.9 0 0 0 13.24.42c-.51-.198-1.092-.333-1.943-.372C10.443.01 10.172 0 7.998 0zm-.717 1.442h.718c2.136 0 2.389.007 3.232.046.78.035 1.204.166 1.486.275.373.145.64.319.92.599s.453.546.598.92c.11.281.24.705.275 1.485.039.843.047 1.096.047 3.231s-.008 2.389-.047 3.232c-.035.78-.166 1.203-.275 1.485a2.5 2.5 0 0 1-.599.919c-.28.28-.546.453-.92.598-.28.11-.704.24-1.485.276-.843.038-1.096.047-3.232.047s-2.39-.009-3.233-.047c-.78-.036-1.203-.166-1.485-.276a2.5 2.5 0 0 1-.92-.598 2.5 2.5 0 0 1-.6-.92c-.109-.281-.24-.705-.275-1.485-.038-.843-.046-1.096-.046-3.233s.008-2.388.046-3.231c.036-.78.166-1.204.276-1.486.145-.373.319-.64.599-.92s.546-.453.92-.598c.282-.11.705-.24 1.485-.276.738-.034 1.024-.044 2.515-.045zm4.988 1.328a.96.96 0 1 0 0 1.92.96.96 0 0 0 0-1.92m-4.27 1.122a4.109 4.109 0 1 0 0 8.217 4.109 4.109 0 0 0 0-8.217m0 1.441a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334"/>
                  </svg>
                </a>
                <a class="px-1" style="color:var(--bulma-navbar-h)" href="https://www.linkedin.com/in/dan-hartropp-432082ba/">
                  <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" fill="currentColor" class="bi bi-linkedin" viewBox="0 0 16 16">
                    <path d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854zm4.943 12.248V6.169H2.542v7.225zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248S2.4 3.226 2.4 3.934c0 .694.521 1.248 1.327 1.248zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016l.016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225z"/>
                  </svg>
                </a>
              </div>
            </div>
          </div>
        </nav>
        
        
        
<main id="maincontent">
  <section>
    <div class="container is-max-desktop box">
      <h1 class="title has-text-primary">Testing</h1>
      <h2 class="subtitle has-text-primary">You can have too much of a good thing</h2>
      <h3 class="subtitle"></h3>
      <div class="content"><p>Before any code goes into production, a set of automated tests should be written and those tests should all pass. Where appropriate (e.g. front-end changes) there should also be a manual check that things work as expected. Where code interacts with existing code or the data layer, the tests for those should also all pass. If the tests are no longer relevant, they should be rewritten to make sure they all pass.</p>
<p>So far so simple.</p>
<p>Having tests that pass is one thing, but knowing you've got the <em>right</em> tests is another. I take a somewhat pragmatic but rigid approach to this. The bare minimum level of testing as as follows ...</p>
<ol>
<li>Aim for at least 95% code coverage. In the real world, there are always weird edge cases that need to be accommodated and are very hard (or slow) to test reliably - it isn't always worth writing tests for these. If you can explain in a one-line comment why a specific section of code doesn't need testing, then it's OK to skip it. But make that section of code as small as possible - a couple of lines is about right.</li>
<li>As a minimum, have test cases for a) the happy path, b) handling the most likely failure path (probably arising form user data) and c) any bugs that have arisen in production.</li>
<li>Unit test and mock everything that it is sensible to unit test. For instance, anything in utils files, the database access layer etc etc. Run these tests whenever the relevant files are changed, for <strong>any</strong> reason.</li>
<li>End to end test everything. Access a copy of the live database in an environment that is as close to production as possible.</li>
<li>Have a suite of tests that check compatibility at the data layer. These don't need to hit the database directly, but should confirm strict typing ... if my code requires a datetime and yours passes a string, the test should fail. Run these tests for the whole project when any files in the data access layer are changed for <strong>any</strong> reason.</li>
<li>Tests should be quick to run. Don't make me wait more than a minute for the whole suite to run. If it's tricky to achieve this and run end to end tests in a close-to-live environment, then refactor the code or the whole architecture to make it work.</li>
<li>Follow a CI/CD process that ensures tests pass before code gets into production. But be pragmatic about this ... if your team is tiny and you're dealing with non-critical code that takes a while to test completely, it might be sensible to allow simultaneous deployment and testing in some cases (like urgent bug fixes).</li>
</ol>
<p>The bottom line is that you're always going to find bugs in production, so there's little point in writing hundreds of tests cases for every scenario you can think of. But do test every happy-path scenario because that means you reduce the risk of putting code into production that breaks something else.</p>
<p>A quick word about load testing ...</p>
<p>Periodically (and whenever significant architectural changes are made) it's worth load testing a close-to-live environment to destruction. There are good automated tools for this - put some limits on your auto-scaler and find out how much traffic your system can handle. This is useful for a) those times when you get a massive spike in legitimate traffic and b) estimating your future costs given assumptions about growth and traffic.</p></div>
    </div>
    <div class="container is-max-desktop">
      <p><a href="/read/index.html"><-- return to index</a></p>
    </div>
  </section>
</main>


      <footer class="footer has-background-black-bis mt-6">
        <div class="columns">
          <div class="column is-one-third">
            <div class="content has-text-grey">
              <p>
                This site is mostly coded by hand, by me.</p> 
                <p>But life is too short to solve the complexities of flexbox and form layout, so I'm using Bulma - a lightweight framework by <a href="https://jgthms.com" class="has-text-grey has-text-weight-semibold">Jeremy Thomas</a>. The source code uses the
                <a href="http://opensource.org/licenses/mit-license.php" class="has-text-grey has-text-weight-semibold">MIT</a> licence. SVG icons are from <a href="https://fontawesome.com/" class="has-text-grey has-text-weight-semibold">fontawesome</a> and <a class="has-text-grey has-text-weight-semibold" href="https://icons.getbootstrap.com/">Bootstrap</a>.
              </p>
              <p>&copy; 2024 Dan Hartropp</p>
            </div>
          </div>
          <div class="column"></div>
        </div>
        <div class="content has-text-centered has-text-light">
          
          <div class="pt-6">
            <a class="px-1 is-color-grey" href="https://www.instagram.com/danhartropp/">
              <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" fill="currentColor" class="bi bi-instagram" viewBox="0 0 16 16">
                <path d="M8 0C5.829 0 5.556.01 4.703.048 3.85.088 3.269.222 2.76.42a3.9 3.9 0 0 0-1.417.923A3.9 3.9 0 0 0 .42 2.76C.222 3.268.087 3.85.048 4.7.01 5.555 0 5.827 0 8.001c0 2.172.01 2.444.048 3.297.04.852.174 1.433.372 1.942.205.526.478.972.923 1.417.444.445.89.719 1.416.923.51.198 1.09.333 1.942.372C5.555 15.99 5.827 16 8 16s2.444-.01 3.298-.048c.851-.04 1.434-.174 1.943-.372a3.9 3.9 0 0 0 1.416-.923c.445-.445.718-.891.923-1.417.197-.509.332-1.09.372-1.942C15.99 10.445 16 10.173 16 8s-.01-2.445-.048-3.299c-.04-.851-.175-1.433-.372-1.941a3.9 3.9 0 0 0-.923-1.417A3.9 3.9 0 0 0 13.24.42c-.51-.198-1.092-.333-1.943-.372C10.443.01 10.172 0 7.998 0zm-.717 1.442h.718c2.136 0 2.389.007 3.232.046.78.035 1.204.166 1.486.275.373.145.64.319.92.599s.453.546.598.92c.11.281.24.705.275 1.485.039.843.047 1.096.047 3.231s-.008 2.389-.047 3.232c-.035.78-.166 1.203-.275 1.485a2.5 2.5 0 0 1-.599.919c-.28.28-.546.453-.92.598-.28.11-.704.24-1.485.276-.843.038-1.096.047-3.232.047s-2.39-.009-3.233-.047c-.78-.036-1.203-.166-1.485-.276a2.5 2.5 0 0 1-.92-.598 2.5 2.5 0 0 1-.6-.92c-.109-.281-.24-.705-.275-1.485-.038-.843-.046-1.096-.046-3.233s.008-2.388.046-3.231c.036-.78.166-1.204.276-1.486.145-.373.319-.64.599-.92s.546-.453.92-.598c.282-.11.705-.24 1.485-.276.738-.034 1.024-.044 2.515-.045zm4.988 1.328a.96.96 0 1 0 0 1.92.96.96 0 0 0 0-1.92m-4.27 1.122a4.109 4.109 0 1 0 0 8.217 4.109 4.109 0 0 0 0-8.217m0 1.441a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334"/>
              </svg>
            </a>
            <a class="px-1 is-color-grey" href="https://www.linkedin.com/in/dan-hartropp-432082ba/">
              <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" fill="currentColor" class="bi bi-linkedin" viewBox="0 0 16 16">
                <path d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854zm4.943 12.248V6.169H2.542v7.225zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248S2.4 3.226 2.4 3.934c0 .694.521 1.248 1.327 1.248zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016l.016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225z"/>
              </svg>
            </a>
          </div>
          
          
        </div>
      </footer>

    




<!-- navbar stuff -->
<script>document.addEventListener("DOMContentLoaded",()=>{const e=Array.prototype.slice.call(document.querySelectorAll(".navbar-burger"),0);e.length>0&&e.forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.target,a=document.getElementById(t);e.classList.toggle("is-active"),a.classList.toggle("is-active")})})});</script>




</body>
</html>